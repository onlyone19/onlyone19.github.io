---
title: Dynamic Programming - 区间
category: Blog
tags:
  - DSA
  - DP
---


## 区间动态规划：
```
线性 DP 的一种，简称为「区间 DP」。以「区间长度」划分阶段，以两个坐标（区间的左、右端点）作为状态的维度。一个状态通常由被它包含且比它更小的区间状态转移而来。
```

区间 DP 的主要思想就是：先在小区间内得到最优解，再利用小区间的最优解合并，从而得到大区间的最优解，最终得到整个区间的最优解。

根据小区间向大区间转移情况的不同，常见的区间 DP 问题可以分为两种：

1. 单个区间从中间向两侧更大区间转移的区间 DP 问题。比如从区间 [i+1,j−1][i+1,j−1] 转移到更大区间 [i,j][i,j]。
2. 多个（大于等于 22 个）小区间转移到大区间的区间 DP 问题。比如从区间 [i,k][i,k] 和区间 [k,j][k,j] 转移到区间 [i,j][i,j]。

## 区间 DP 问题的基本思路
### 1.2.1 第 1 种区间 DP 问题基本思路

从中间向两侧转移的区间 DP 问题的状态转移方程一般为：
`dp[i][j]=max{dp[i+1][j−1],dp[i+1][j],dp[i][j−1]}+cost[i][j],i≤jdp[i][j]=max{dp[i+1][j−1],dp[i+1][j],dp[i][j−1]}+cost[i][j],i≤j`。

1. 其中 dp[i][j]dp[i][j] 表示为：区间 [i,j][i,j]（即下标位置 ii 到下标位置 jj 上所有元素）上的最大价值。
2. costcost 表示为：从小区间转移到区间 [i,j][i,j] 的代价。
3. 这里的 max/minmax/min 取决于题目是求最大值还是求最小值。

从中间向两侧转移的区间 DP 问题的基本解题思路如下：

  1. 枚举区间的起点；
  2. 枚举区间的终点；
  3. 根据状态转移方程计算从小区间转移到更大区间后的最优值。

### 1.2.3 第 2 种区间 DP 问题基本思路
多个（大于等于 22 个）小区间转移到大区间的区间 DP 问题的状态转移方程一般为：
`dp[i][j]=max/min{dp[i][k]+dp[k+1][j]+cost[i][j]},i<k≤jdp[i][j]=max/min{dp[i][k]+dp[k+1][j]+cost[i][j]},i<k≤j`。

1. 其中状态 dp[i][j]dp[i][j] 表示为：区间 [i,j][i,j] （即下标位置 ii 到下标位置 jj 上所有元素）上的最大价值。
2. cost[i][j]cost[i][j] 表示为：将两个区间 [i,k][i,k] 与 [k+1,j][k+1,j] 中的元素合并为区间 [i,j][i,j] 中的元素的代价。
3. 这里的 max/minmax/min 取决于题目是求最大值还是求最小值。

多个小区间转移到大区间的区间 DP 问题的基本解题思路如下：

1. 枚举区间长度；
2. 枚举区间的起点，根据区间起点和区间长度得出区间终点；
3. 枚举区间的分割点，根据状态转移方程计算合并区间后的最优值。

对应代码如下：
